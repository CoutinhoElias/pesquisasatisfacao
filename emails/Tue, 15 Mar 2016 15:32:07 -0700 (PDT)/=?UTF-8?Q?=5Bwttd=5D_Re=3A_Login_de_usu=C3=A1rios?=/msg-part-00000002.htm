<div dir="ltr">Marcus.<div><br></div><div>estou utilizando este no momento.</div><div><br></div><div><pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:&#39;Source Code Pro&#39;;font-size:13.6pt;"><span style="color:#cc7832;font-weight:bold;">def </span><span style="font-weight:bold;">Login</span>(request):<br><br>    <span style="color:#cc7832;font-weight:bold;">if </span>request.method == <span style="color:#008080;">&#39;POST&#39;</span>:<br><br>        form = LoginForm(request.POST)<br><br>        <span style="color:#cc7832;font-weight:bold;">if not </span>form.is_valid():<br>            <span style="color:#cc7832;background-color:#344134;font-weight:bold;">return </span><span style="background-color:#344134;">render(request</span><span style="color:#cc7832;background-color:#344134;">, </span><span style="color:#008080;background-color:#344134;">&#39;dashboard/login_form.html&#39;</span><span style="color:#cc7832;background-color:#344134;">, </span><span style="background-color:#344134;">{</span><span style="color:#008080;background-color:#344134;">&#39;form&#39;</span><span style="background-color:#344134;">: form})</span><br><br>        username = request.POST[<span style="color:#008080;">&#39;username&#39;</span>]<br>        password = request.POST[<span style="color:#008080;">&#39;password&#39;</span>]<br><br>        <span style="color:#cc7832;font-weight:bold;">if </span><span style="color:#008080;">&#39;@&#39; </span><span style="color:#cc7832;font-weight:bold;">in </span>username:  <span style="color:#808080;"># se tiver @ no nome do usuário  username vai ser o email<br></span><span style="color:#808080;">            </span>kwargs = {<span style="color:#008080;">&#39;email&#39;</span>: username}<br>        <span style="color:#cc7832;font-weight:bold;">else</span>:<br>            kwargs = {<span style="color:#008080;">&#39;username&#39;</span>: username}<br>        <span style="color:#cc7832;font-weight:bold;">try</span>:<br>            <span style="color:#808080;"># tentando buscar o usuário no banco<br></span><span style="color:#808080;">            </span>user = User.objects.get(**kwargs)<br>            <span style="color:#cc7832;font-weight:bold;">if </span>user.check_password(password):<br>                <span style="color:#cc7832;background-color:#344134;font-weight:bold;">return </span><span style="background-color:#344134;">HttpResponseRedirect(r(</span><span style="color:#008080;background-color:#344134;">&#39;dashboard:dash&#39;</span><span style="color:#cc7832;background-color:#344134;">, </span><span style="background-color:#344134;">user.pk))</span><br>        <span style="color:#cc7832;font-weight:bold;">except </span>User.DoesNotExist:<br>            <span style="color:#cc7832;background-color:#344134;font-weight:bold;">return </span><span style="background-color:#344134;">render(request</span><span style="color:#cc7832;background-color:#344134;">, </span><span style="color:#008080;background-color:#344134;">&#39;dashboard/login_form.html&#39;</span><span style="color:#cc7832;background-color:#344134;">, </span><span style="background-color:#344134;">{</span><span style="color:#008080;background-color:#344134;">&#39;form&#39;</span><span style="background-color:#344134;">: form})</span><br>    <span style="color:#cc7832;font-weight:bold;">else</span>:<br>        form = LoginForm()<br>        <span style="color:#cc7832;background-color:#344134;font-weight:bold;">return </span><span style="background-color:#344134;">render(request</span><span style="color:#cc7832;background-color:#344134;">, </span><span style="color:#008080;background-color:#344134;">&#39;dashboard/login_form.html&#39;</span><span style="color:#cc7832;background-color:#344134;">, </span><span style="background-color:#344134;">{</span><span style="color:#008080;background-color:#344134;">&#39;form&#39;</span><span style="background-color:#344134;">: form})</span></pre><br>segunda-feira, 14 de Março de 2016 às 14:14:04 UTC, Marcus Gabaldo escreveu:<blockquote class="gmail_quote" style="margin: 0;margin-left: 0.8ex;border-left: 1px #ccc solid;padding-left: 1ex;">Fala pessoal. Alguém poderia me dar uma dica com respeito a login de usuários utilizando o email para logar?
<br>Valeu.</blockquote></div></div>

<p></p>

-- <br />
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br />
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com">wttd-2015+unsubscribe@googlegroups.com</a>.<br />
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com">wttd-2015@googlegroups.com</a>.<br />
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015">https://groups.google.com/group/wttd-2015</a>.<br />
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/105169d6-0d5d-4b28-9072-a363b201a5b1%40googlegroups.com?utm_medium=email&utm_source=footer">https://groups.google.com/d/msgid/wttd-2015/105169d6-0d5d-4b28-9072-a363b201a5b1%40googlegroups.com</a>.<br />
Para mais opções, acesse <a href="https://groups.google.com/d/optout">https://groups.google.com/d/optout</a>.<br />
