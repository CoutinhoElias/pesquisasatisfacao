<div dir="ltr">Ficou show Danivir, valeu mesmo.<div>Depois vou passar mais códigos pra vc analisar a performance.</div><div>Ou nos ensinar... o que é melhor.</div><div><br></div><div>Agora gordo fresco? Só falta falar Francês. kkk</div><div><br></div><div>Valeu.</div></div><div class="gmail_extra"><br clear="all"><div><div class="gmail_signature"><div dir="ltr"><div class="gmail_signature"><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="http://rg3915.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/rg3915/rg3915.github.io/master/img/paper_plane_gray.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/images/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"></span> <a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://br.linkedin.com/in/régis-da-silva-santos-7601ab61" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td></tr></tbody></table></div></div></div></div></div>
<br><div class="gmail_quote">Em 4 de abril de 2016 16:39, Davinir F Campos Jr <span dir="ltr">&lt;<a href="mailto:davinir.jr@gmail.com" target="_blank">davinir.jr@gmail.com</a>&gt;</span> escreveu:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Ele evita o loop <span style="font-family:monospace,monospace;font-size:12.8px">for choice in STATUS_LIST</span>, acessando os itens direto do dicionário (que é instanciado uma única vez). <div><br></div><div>Em termos de execução: na sua implementação, haverá <font face="monospace, monospace">(len(p) * 5)</font> loops (sendo que somente <font face="monospace, monospace">len(p)</font> serão &quot;aproveitáveis&quot;, dado que um p tem somente um STATUS), enquanto que na que propus haverá <font face="monospace, monospace">len(p)</font>.</div><div><br></div><div>Acredito que ele seja mais performático, sim, mas somente a parte de usar o dict. O list compreension é só mais frescura do gordo ;)<div><br></div><div><br></div><div>Abraço,</div><div>J</div></div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div class="h5">2016-04-04 13:55 GMT-03:00 Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span>:<br></div></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div class="h5"><div dir="ltr">Davinir, seu código também funcionou.<div><br></div><div>Quer dizer que ele é mais performático?</div><div><br></div><div>Valeu.</div><div><br></div></div><div class="gmail_extra"><span><br clear="all"><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="http://rg3915.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/rg3915/rg3915.github.io/master/img/paper_plane_gray.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/images/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"></span> <a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td></tr></tbody></table></div></div></div>
<br></span><div class="gmail_quote"><div><div>Em 3 de abril de 2016 23:15, Davinir F Campos Jr <span dir="ltr">&lt;<a href="mailto:davinir.jr@gmail.com" target="_blank">davinir.jr@gmail.com</a>&gt;</span> escreveu:<br></div></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div><div dir="ltr"><div>Não testei, Régis, mas isso não funcioniaria?</div><div><br></div><div style="font-size:12.8px"><font face="monospace, monospace">from orcamentos.utils.lists import STATUS_LIST</font></div><div style="font-size:12.8px"><font face="monospace, monospace"><br></font></div><div style="font-size:12.8px"><font face="monospace, monospace">STATUS_DICT = dict(</font><span style="font-family:monospace,monospace;font-size:12.8px">STATUS_LIST)</span></div><span><div style="font-size:12.8px"><font face="monospace, monospace"><br></font></div><div style="font-size:12.8px"><font face="monospace, monospace">p=Proposal.objects.values(&#39;status&#39;)\</font></div><span style="font-size:12.8px"><div><font face="monospace, monospace">.annotate(value=Count(&#39;status&#39;))\</font></div><div><font face="monospace, monospace">.order_by(&#39;status&#39;).values(&#39;status&#39;, &#39;value&#39;)</font></div></span><div style="font-size:12.8px"><font face="monospace, monospace"><br></font></div></span><div style="font-size:12.8px"><font face="monospace, monospace">lista = [ {&#39;label&#39;: </font><span style="font-family:monospace,monospace;font-size:12.8px">STATUS_DICT</span><font face="monospace, monospace">[item[&#39;status&#39;]], &#39;value&#39;: item[&#39;value&#39;]} for item in p ]</font></div><div style="font-size:12.8px"><br></div><div style="font-size:12.8px"><font face="monospace, monospace">return lista</font></div><div><br></div><div><br></div><div>Dessa maneira vc evita gastar ciclo computacional no loop no STATUS_LIST a cara item em p.</div><div><br></div><div>Testa aí e avisa aqui pra galera!</div><div><br></div><div><br></div><div>Abraço,</div><div>J</div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div>2016-04-03 0:27 GMT-03:00 Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span>:<br></div></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div><div dir="ltr"><a href="https://github.com/rg3915/orcamentos/commit/121844d0aa238f8d2a086ac0080a16f3fabf9ff0" target="_blank">https://github.com/rg3915/orcamentos/commit/121844d0aa238f8d2a086ac0080a16f3fabf9ff0</a><br></div><div class="gmail_extra"><span><br clear="all"><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="http://rg3915.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/rg3915/rg3915.github.io/master/img/paper_plane_gray.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/images/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"></span> <a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td></tr></tbody></table></div></div></div>
<br></span><div><div><div class="gmail_quote">Em 3 de abril de 2016 00:03, Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span> escreveu:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Resultado:<div><br></div><div><div><font face="monospace, monospace">[{&#39;label&#39;: &#39;aprovado&#39;, &#39;value&#39;: 15}, {&#39;label&#39;: &#39;cancelado&#39;, &#39;value&#39;: 10}, {&#39;label&#39;: &#39;concluido&#39;, &#39;value&#39;: 14}, {&#39;label&#39;: &#39;em elaboração&#39;, &#39;value&#39;: 12}, {&#39;label&#39;: &#39;pendente&#39;, &#39;value&#39;: 12}]</font></div></div><div><font face="monospace, monospace"><br></font></div><div><font face="monospace, monospace"><img src="https://pbs.twimg.com/profile_images/529239174558138368/XoMw54lV.jpeg" width="188" height="188" style="margin-right:0px"><br><br></font></div><div><br></div></div><div class="gmail_extra"><span><br clear="all"><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="http://rg3915.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/rg3915/rg3915.github.io/master/img/paper_plane_gray.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/images/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"></span> <a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td></tr></tbody></table></div></div></div>
<br></span><div><div><div class="gmail_quote">Em 2 de abril de 2016 23:52, Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span> escreveu:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><div><font face="arial, helvetica, sans-serif">Resolvido.</font></div><div><font face="monospace, monospace"><br></font></div><div><font face="monospace, monospace">from orcamentos.utils.lists import STATUS_LIST</font></div><div><font face="monospace, monospace">p=Proposal.objects.values(&#39;status&#39;)\</font></div><span><div><font face="monospace, monospace">.annotate(value=Count(&#39;status&#39;))\</font></div><div><font face="monospace, monospace">.order_by(&#39;status&#39;).values(&#39;status&#39;, &#39;value&#39;)</font></div></span><div><font face="monospace, monospace">lista=[]</font></div><div><font face="monospace, monospace">for item in p:</font></div><div><font face="monospace, monospace">    for choice in STATUS_LIST:</font></div><div><font face="monospace, monospace">        if choice[0] == item[&#39;status&#39;]:</font></div><div><font face="monospace, monospace">            lista.append({&#39;label&#39;: choice[1], &#39;value&#39;: item[&#39;value&#39;]})</font></div><div><font face="monospace, monospace"><br></font></div><div><font face="monospace, monospace">return lista</font></div><div><img src="https://poderosa97.files.wordpress.com/2011/03/tumblr_lhx808aqqd1qcik7yo1_500.gif" width="472" height="189"><br><br></div></div><div class="gmail_extra"><span><br clear="all"><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="http://rg3915.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/rg3915/rg3915.github.io/master/img/paper_plane_gray.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/images/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"></span> <a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td></tr></tbody></table></div></div></div>
<br></span><div><div><div class="gmail_quote">Em 2 de abril de 2016 20:41, Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span> escreveu:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Alguém sabe essa?</div><div class="gmail_extra"><span><br clear="all"><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="http://rg3915.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/rg3915/rg3915.github.io/master/img/paper_plane_gray.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/images/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"></span> <a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td></tr></tbody></table></div></div></div>
<br></span><div><div><div class="gmail_quote">Em 27 de março de 2016 16:22, Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span> escreveu:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><div>Pessoal dêem uma olhada nisso aqui:</div><div><br></div><div><a href="https://github.com/rg3915/orcamentos/issues/53" target="_blank">https://github.com/rg3915/orcamentos/issues/53</a></div><div><br></div><div>Eu fiz um gráfico usando Morris JS</div><div><br></div><div><a href="https://github.com/rg3915/orcamentos/blob/master/img/graphic.png" target="_blank">https://github.com/rg3915/orcamentos/blob/master/img/graphic.png</a></div><div><br></div><div><img src="https://raw.githubusercontent.com/rg3915/orcamentos/master/img/graphic.png" width="469" height="261"><br><br></div><div><br></div><div><b>Pergunta: como eu faço para retornar get_status_display no json?</b></div><div><br></div><div><font face="monospace, monospace">import json</font></div><div><font face="monospace, monospace">from django.db.models import Count</font></div><div><font face="monospace, monospace">from django.core.serializers.json import DjangoJSONEncoder</font></div><div><font face="monospace, monospace">from django.http import HttpResponse</font></div><div><font face="monospace, monospace">from .models import Proposal</font></div><div><font face="monospace, monospace"><br></font></div><div><font face="monospace, monospace"><br></font></div><div><font face="monospace, monospace">def proposal_per_status_json(request):</font></div><div><font face="monospace, monospace">    &#39;&#39;&#39; Quantidade de orçamentos por status &#39;&#39;&#39;</font></div><div><font face="monospace, monospace">    data = Proposal.objects.values(&#39;status&#39;)\</font></div><div><font face="monospace, monospace">        .annotate(value=Count(&#39;status&#39;))\</font></div><div><font face="monospace, monospace">        .order_by(&#39;status&#39;).values(&#39;status&#39;, &#39;value&#39;)</font></div><div><font face="monospace, monospace">    &#39;&#39;&#39;</font></div><div><font face="monospace, monospace">    Precisa reescrever o dicionário com os campos do gráfico,</font></div><div><font face="monospace, monospace">    que são: &#39;label&#39; e &#39;value&#39;.</font></div><div><font face="monospace, monospace">    &#39;&#39;&#39;</font></div><div><font face="monospace, monospace">    data = [{&#39;label&#39;: x[&#39;status&#39;], &#39;value&#39;:x[&#39;value&#39;]} for x in data]</font></div><div><font face="monospace, monospace">    s = json.dumps(list(data), cls=DjangoJSONEncoder)</font></div><div><font face="monospace, monospace">    return HttpResponse(s)</font></div><div><br></div><div><br></div><div><a href="http://localhost:8000/proposal/proposal/proposal_per_status_json/" target="_blank">http://localhost:8000/proposal/proposal/proposal_per_status_json/</a></div><div><br></div><div><font face="monospace, monospace">[{&quot;label&quot;: &quot;a&quot;, &quot;value&quot;: 11}, {&quot;label&quot;: &quot;c&quot;, &quot;value&quot;: 9}, {&quot;label&quot;: &quot;co&quot;, &quot;value&quot;: 28}, {&quot;label&quot;: &quot;elab&quot;, &quot;value&quot;: 9}, {&quot;label&quot;: &quot;p&quot;, &quot;value&quot;: 14}]</font></div><div><br></div><div>Mas eu queria</div><div><br></div><div><font face="monospace, monospace">[{&quot;label&quot;: &quot;aprovado&quot;, &quot;value&quot;: 11}, {&quot;label&quot;: &quot;cancelado&quot;, &quot;value&quot;: 9}, {&quot;label&quot;: &quot;concluído&quot;, &quot;value&quot;: 28}, {&quot;label&quot;: &quot;em elaboração&quot;, &quot;value&quot;: 9}, {&quot;label&quot;: &quot;pendente&quot;, &quot;value&quot;: 14}]</font></div><div><font face="monospace, monospace"><br></font></div><div><font face="monospace, monospace">STATUS_FILTER = (</font></div><div><font face="monospace, monospace">    (&#39;c&#39;, &#39;cancelado&#39;),</font></div><div><font face="monospace, monospace">    (&#39;elab&#39;, &#39;em elaboração&#39;),</font></div><div><font face="monospace, monospace">    (&#39;p&#39;, &#39;pendente&#39;),</font></div><div><font face="monospace, monospace">    (&#39;co&#39;, &#39;concluido&#39;),</font></div><div><font face="monospace, monospace">    (&#39;a&#39;, &#39;aprovado&#39;)</font></div><div><font face="monospace, monospace">)</font></div><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="http://rg3915.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/rg3915/rg3915.github.io/master/img/paper_plane_gray.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/images/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"></span> <a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td></tr></tbody></table></div></div></div>
</div>
</blockquote></div><br></div></div></div>
</blockquote></div><br></div></div></div>
</blockquote></div><br></div></div></div>
</blockquote></div><br></div></div></div></div></div><span><font color="#888888"><div><div>

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com" target="_blank">wttd-2015+unsubscribe@googlegroups.com</a>.<br>
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com" target="_blank">wttd-2015@googlegroups.com</a>.<br>
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015" target="_blank">https://groups.google.com/group/wttd-2015</a>.<br></div></div>
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZP1-dU90n9jPHXWT4NMdMH%3Db0jyJbTDeCNStaiEpGLZwg%40mail.gmail.com?utm_medium=email&amp;utm_source=footer" target="_blank">https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZP1-dU90n9jPHXWT4NMdMH%3Db0jyJbTDeCNStaiEpGLZwg%40mail.gmail.com</a>.<div><div><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/optout</a>.<br>
</div></div></font></span></blockquote></div><span><font color="#888888"><br></font></span></div></div></div><span><font color="#888888"><div><div>

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com" target="_blank">wttd-2015+unsubscribe@googlegroups.com</a>.<br>
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com" target="_blank">wttd-2015@googlegroups.com</a>.<br>
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015" target="_blank">https://groups.google.com/group/wttd-2015</a>.<br></div></div>
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CABFnmazt%2B9_LxViS-xjfTwS3ut9mxxJXRg-diBnwFAO%3DzvahFA%40mail.gmail.com?utm_medium=email&amp;utm_source=footer" target="_blank">https://groups.google.com/d/msgid/wttd-2015/CABFnmazt%2B9_LxViS-xjfTwS3ut9mxxJXRg-diBnwFAO%3DzvahFA%40mail.gmail.com</a>.<span><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/optout</a>.<br>
</span></font></span></blockquote></div><br></div><span>

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com" target="_blank">wttd-2015+unsubscribe@googlegroups.com</a>.<br>
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com" target="_blank">wttd-2015@googlegroups.com</a>.<br>
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015" target="_blank">https://groups.google.com/group/wttd-2015</a>.<br></span></div></div>
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZNaY8BSqXOSRThAN9qbFb5ZRSNtzmL1HmkTjJkcVNHbcg%40mail.gmail.com?utm_medium=email&amp;utm_source=footer" target="_blank">https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZNaY8BSqXOSRThAN9qbFb5ZRSNtzmL1HmkTjJkcVNHbcg%40mail.gmail.com</a>.<span class=""><div><div><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/optout</a>.<br>
</div></div></span></blockquote></div><br></div><span class="">

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com" target="_blank">wttd-2015+unsubscribe@googlegroups.com</a>.<br>
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com" target="_blank">wttd-2015@googlegroups.com</a>.<br>
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015" target="_blank">https://groups.google.com/group/wttd-2015</a>.<br></span>
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CABFnmawqZE6OPSxqgg5YBErErm3VabqRmDjLara_BZ5YPXOeVQ%40mail.gmail.com?utm_medium=email&amp;utm_source=footer" target="_blank">https://groups.google.com/d/msgid/wttd-2015/CABFnmawqZE6OPSxqgg5YBErErm3VabqRmDjLara_BZ5YPXOeVQ%40mail.gmail.com</a>.<div class="HOEnZb"><div class="h5"><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/optout</a>.<br>
</div></div></blockquote></div><br></div>

<p></p>

-- <br />
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br />
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com">wttd-2015+unsubscribe@googlegroups.com</a>.<br />
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com">wttd-2015@googlegroups.com</a>.<br />
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015">https://groups.google.com/group/wttd-2015</a>.<br />
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZOc9qB3__qpRFnL5%2BOYz9G%2BG783b7AiYEKjzXuRL6V-rg%40mail.gmail.com?utm_medium=email&utm_source=footer">https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZOc9qB3__qpRFnL5%2BOYz9G%2BG783b7AiYEKjzXuRL6V-rg%40mail.gmail.com</a>.<br />
Para mais opções, acesse <a href="https://groups.google.com/d/optout">https://groups.google.com/d/optout</a>.<br />
