<div dir="ltr">Opa, eu estava usando o Python 3.6.3 estava dando o erro abaixo, criei uma virtualenv com o 3.5.4 ai rodou. Obrigado.<br><br>Django version 1.10.7, using settings &#39;config.settings.local&#39;<br>Starting development server at <a href="http://127.0.0.1:8000/" target="_blank">http://127.0.0.1:8000/</a><br>Quit the server with CONTROL-C.<br>Unhandled exception in thread started by &lt;function check_errors.&lt;locals&gt;.wrapper at 0x7f58958ff840&gt;<br>Traceback (most recent call last):<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/utils/<wbr>autoreload.py&quot;, line 226, in wrapper<br>    fn(*args, **kwargs)<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/core/<wbr>management/commands/runserver.<wbr>py&quot;, line 142, in inner_run<br>    handler = self.get_handler(*args, **options)<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/contrib/<wbr>staticfiles/management/<wbr>commands/runserver.py&quot;, line 27, in get_handler<br>    handler = super(Command, self).get_handler(*args, **options)<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/core/<wbr>management/commands/runserver.<wbr>py&quot;, line 64, in get_handler<br>    return get_internal_wsgi_application(<wbr>)<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/core/servers/<wbr>basehttp.py&quot;, line 49, in get_internal_wsgi_application<br>    return import_string(app_path)<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/utils/module_<wbr>loading.py&quot;, line 20, in import_string<br>    module = import_module(module_path)<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/<wbr>importlib/__init__.py&quot;, line 126, in import_module<br>    return _bootstrap._gcd_import(name[<wbr>level:], package, level)<br>  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 994, in _gcd_import<br>  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 971, in _find_and_load<br>  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 955, in _find_and_load_unlocked<br>  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 665, in _load_unlocked<br>  File &quot;&lt;frozen importlib._bootstrap_external&gt;<wbr>&quot;, line 678, in exec_module<br>  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 219, in _call_with_frames_removed<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/danibraz/config/<wbr>wsgi.py&quot;, line 38, in &lt;module&gt;<br>    application = get_wsgi_application()<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/core/wsgi.py&quot;, line 14, in get_wsgi_application<br>    return WSGIHandler()<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/core/handlers/<wbr>wsgi.py&quot;, line 153, in __init__<br>    self.load_middleware()<br>  File &quot;/home/william/.virtualenvs/<wbr>env_teste/lib/python3.6/site-<wbr>packages/django/core/handlers/<wbr>base.py&quot;, line 82, in load_middleware<br>    mw_instance = middleware(handler)<br>TypeError: __init__() takes 1 positional argument but 2 were given<br><br><div class="gmail_extra"><br><div class="gmail_quote">2017-12-14 15:05 GMT-02:00 Elias Coutinho <span dir="ltr">&lt;<a href="mailto:coutinho.elias@gmail.com" target="_blank">coutinho.elias@gmail.com</a>&gt;</span>:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Somente o virtualenv com python3 e instale o requirements.txt<div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote"><div><div class="m_4603520749044887898h5">Em 14 de dezembro de 2017 12:59, willian firmino <span dir="ltr">&lt;<a href="mailto:willian.firmino1@gmail.com" target="_blank">willian.firmino1@gmail.com</a>&gt;</span> escreveu:<br></div></div><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div><div class="m_4603520749044887898h5"><div dir="ltr">gostaria de ver este projeto rodando, o que tenho que configurar?<br></div><div class="gmail_extra"><br><div class="gmail_quote"><span>2017-12-13 18:59 GMT-02:00 Elias Coutinho <span dir="ltr">&lt;<a href="mailto:coutinho.elias@gmail.com" target="_blank">coutinho.elias@gmail.com</a>&gt;</span>:<br></span><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><span><div dir="ltr"><div>Boa tarde pessoal.</div><div>Estou tentando implementar um controle de estoque.</div><div>Por enquanto estou apenas nas movimentações de saída.</div><div>Quando eu emito um invoice ele corretamente dá a saída do estoque conforme código no models abaixo:</div><div>Inclusive ele verifica se o estoque vai ficar negativo e avisa!</div><div><br></div><div><a href="https://github.com/CoutinhoElias/danibraz/blob/master/danibraz/checkout/models.py#L137-L163" target="_blank">https://github.com/CoutinhoEli<wbr>as/danibraz/blob/master/danibr<wbr>az/checkout/models.py#L137-L16<wbr>3</a></div><div><br></div><div>O problema é quando editamos um documento, ele faz o processo acima novamente, ou seja, dá a saída novamente com novos valores. Isso ta errado! Deveria fazer uma análise da quantidade antes de salvar o estoque e dependendo do valor editado ele deveria adicionar ou remover do estoque. </div><div>Exemplo:</div><div><br></div><div>Na tabela Papel existe um campo chamado stock, conforme abaixo:</div><div><a href="https://github.com/CoutinhoElias/danibraz/blob/master/danibraz/checkout/models.py#L105-L116" target="_blank">https://github.com/CoutinhoEli<wbr>as/danibraz/blob/master/danibr<wbr>az/checkout/models.py#L105-L11<wbr>6</a> </div><div><br></div><div>Lá consta meu cadastro de produtos e minha quantidade em estoque de cada um deles.</div><div><br></div><div>Na tabela Item constamos itens de um documento de saída conforme postei no início.</div><div>Quando um item é salvo no banco de dados um signals é disparado e dou saída do estoque do produto que preenchi no campo title, isso ta lindo! Funcionando!</div><div><br></div><div>O problema é quando vou editar esse documento, ele no lugar de atualizar a diferença na quantidade de estoque da tabela Papel ele dá saída novamente!</div><div>Falei com um amigo e ele pediu para mostrar isso no fórum e ainda disse que o problema pode ser minha view do updade, então abaixo estão as duas views para os senhores tentarem identificar algum bug, pois já pesquisei em vários locais e não achei nada. </div><div><br></div><div><a href="https://github.com/CoutinhoElias/danibraz/blob/master/danibraz/checkout/views.py#L14-L54" target="_blank">https://github.com/CoutinhoEli<wbr>as/danibraz/blob/master/danibr<wbr>az/checkout/views.py#L14-L54</a></div><div><br></div><div>Obrigado.</div></div></span><span class="m_4603520749044887898m_7981904460599708641m_-6572688286763334657HOEnZb"><font color="#888888"><span class="m_4603520749044887898m_7981904460599708641HOEnZb"><font color="#888888">

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Django Brasil&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:django-brasil+unsubscribe@googlegroups.com" target="_blank">django-brasil+unsubscribe@goog<wbr>legroups.com</a>.</font></span><span><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/op<wbr>tout</a>.<br>
</span></font></span></blockquote></div><br></div></div></div><div class="m_4603520749044887898m_7981904460599708641HOEnZb"><div class="m_4603520749044887898m_7981904460599708641h5">

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito em um tópico no grupo &quot;Django Brasil&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse tópico, acesse <a href="https://groups.google.com/d/topic/django-brasil/OvuWra_QpRE/unsubscribe" target="_blank">https://groups.google.com/d/to<wbr>pic/django-brasil/OvuWra_QpRE/<wbr>unsubscribe</a>.<br>
Para cancelar inscrição nesse grupo e todos os seus tópicos, envie um e-mail para <a href="mailto:django-brasil+unsubscribe@googlegroups.com" target="_blank">django-brasil+unsubscribe@goog<wbr>legroups.com</a>.<span><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/op<wbr>tout</a>.<br>
</span></div></div></blockquote></div><span class="m_4603520749044887898HOEnZb"><font color="#888888"><br><br clear="all"><div><br></div>-- <br><div class="m_4603520749044887898m_7981904460599708641gmail_signature" data-smartmail="gmail_signature">Elias Coutinho.<br>Aprender sobre alguns assuntos é fundamental.<br>Aprender sobre Deus é indiscutivelmente o melhor conteúdo.</div>
</font></span></div><div class="m_4603520749044887898HOEnZb"><div class="m_4603520749044887898h5">

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Django Brasil&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:django-brasil+unsubscribe@googlegroups.com" target="_blank">django-brasil+unsubscribe@goog<wbr>legroups.com</a>.<br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/op<wbr>tout</a>.<br>
</div></div></blockquote></div><br></div></div>

<p></p>

-- <br />
Você recebeu essa mensagem porque está inscrito em um tópico no grupo &quot;Django Brasil&quot; dos Grupos do Google.<br />
Para cancelar inscrição nesse tópico, acesse <a href="https://groups.google.com/d/topic/django-brasil/OvuWra_QpRE/unsubscribe">https://groups.google.com/d/topic/django-brasil/OvuWra_QpRE/unsubscribe</a>.<br />
Para cancelar inscrição nesse grupo e todos os seus tópicos, envie um e-mail para <a href="mailto:django-brasil+unsubscribe@googlegroups.com">django-brasil+unsubscribe@googlegroups.com</a>.<br />
Para mais opções, acesse <a href="https://groups.google.com/d/optout">https://groups.google.com/d/optout</a>.<br />
