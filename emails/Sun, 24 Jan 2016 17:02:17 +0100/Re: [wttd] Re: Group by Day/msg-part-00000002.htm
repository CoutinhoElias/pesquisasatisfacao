<div dir="ltr">Não sei se sou só eu, mas para queries complexas (ou simples agregates) eu acho &#39;raw sql&#39; muito mais fácil. :)<div><br></div><div><br></div></div><div class="gmail_extra"><br><div class="gmail_quote">2016-01-24 16:30 GMT+01:00 Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span>:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Alias, devia ter me passado antes de eu quebrar a cabeça aqui né? :-|</div><div class="gmail_extra"><span class=""><br clear="all"><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" valign="middle" width="80"><p style="margin-right:10px;font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;margin-bottom:10px"><a href="http://eventex-regis.herokuapp.com/" style="text-decoration:none" target="_blank">EVENTEX </a><a href="https://github.com/rg3915/wttd2" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br><a href="http://grandeportal.github.io/" style="text-decoration:none" target="_blank">grandeportal.github.io</a> <span style="display:inline"><br></span></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/img/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a></p></td></tr></tbody></table></div></div></div>
<br></span><div><div class="h5"><div class="gmail_quote">Em 24 de janeiro de 2016 13:23, Régis Silva <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span> escreveu:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Já favoritei aqui Davinir, valeu.</div><div class="gmail_extra"><span><br clear="all"><div><div><div dir="ltr"><table border="0" cellpadding="0" width="180" style="font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" valign="middle" width="80"><p style="margin-right:10px;font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;margin-bottom:10px"><a href="http://eventex-regis.herokuapp.com/" style="text-decoration:none" target="_blank">EVENTEX </a><a href="https://github.com/rg3915/wttd2" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span></p></td><td align="left" nowrap width="100"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold;display:inline">Regis da Silva</span><br><span style="display:inline"></span><span style="display:inline">Web Developer</span><br><a href="http://grandeportal.github.io/" style="text-decoration:none" target="_blank">grandeportal.github.io</a> <span style="display:inline"><br></span></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="https://about.me/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="http://www.kevinpiersoul.com/assets/images/about-active.png" alt="Aboutme" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/linkedin.png" alt="Linkedin" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="https://github.com/rg3915" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://s3.amazonaws.com/htmlsig-assets/round/github.png" alt="github" style="margin-bottom:2px;border:none;display:inline"></a><span style="white-space:nowrap"><img src="https://s3.amazonaws.com/htmlsig-assets/spacer.gif" width="2"></span> <a href="http://grandeportal.github.io/" style="display:inline;text-decoration:none" target="_blank"><img width="16" height="16" src="https://raw.githubusercontent.com/grandeportal/grandeportal.github.io/master/img/matrix-icon.jpg" alt="matrix" style="margin-bottom:2px;border:none;display:inline"></a></p></td></tr></tbody></table></div></div></div>
<br></span><div><div><div class="gmail_quote">Em 24 de janeiro de 2016 06:55, Davinir F Campos Jr <span dir="ltr">&lt;<a href="mailto:davinir.jr@gmail.com" target="_blank">davinir.jr@gmail.com</a>&gt;</span> escreveu:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr">Show Régis.<div><br></div><div>Você chegou a ver se o django-qsstats-magic[1] te atende?</div><div><br></div><div>Vi neste post <a href="https://groups.google.com/forum/#!msg/django-users/ij4unM8xhTc/1bD8hmHzBYEJ" target="_blank">https://groups.google.com/forum/#!msg/django-users/ij4unM8xhTc/1bD8hmHzBYEJ</a>, onde o Rogério mostrou como fazer na unha no MySQL e no Postgresql, e o Mikhail citou essa criança.</div><div><br></div><div><br></div><div>Abraço,</div><div>J</div><div><br></div><div>[1] <a href="https://bitbucket.org/kmike/django-qsstats-magic/" target="_blank">https://bitbucket.org/kmike/django-qsstats-magic/</a></div></div><div><div><div class="gmail_extra"><br><div class="gmail_quote">2016-01-24 2:07 GMT-02:00 regis.santos.100 <span dir="ltr">&lt;<a href="mailto:regis.santos.100@gmail.com" target="_blank">regis.santos.100@gmail.com</a>&gt;</span>:<br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div dir="ltr"><div style="border:1px solid rgb(187,187,187);word-wrap:break-word;background-color:rgb(250,250,250)"><code><div><span style="color:#800"># Django aggregation, group by day</span><span style="color:#000"><br></span><span style="color:#008">import</span><span style="color:#000"> datetime<br></span><span style="color:#008">import</span><span style="color:#000"> itertools<br>qs </span><span style="color:#660">=</span><span style="color:#000"> </span><span style="color:#606">Subscription</span><span style="color:#660">.</span><span style="color:#000">objects</span><span style="color:#660">.</span><span style="color:#000">values</span><span style="color:#660">(</span><span style="color:#080">&#39;created_at&#39;</span><span style="color:#660">).</span><span style="color:#000">values</span><span style="color:#660">(</span><span style="color:#080">&#39;created_at&#39;</span><span style="color:#660">)</span><span style="color:#000"><br>grouped </span><span style="color:#660">=</span><span style="color:#000"> itertools</span><span style="color:#660">.</span><span style="color:#000">groupby</span><span style="color:#660">(</span><span style="color:#000">qs</span><span style="color:#660">,</span><span style="color:#000"> </span><span style="color:#008">lambda</span><span style="color:#000"> d</span><span style="color:#660">:</span><span style="color:#000"> d</span><span style="color:#660">.</span><span style="color:#008">get</span><span style="color:#660">(</span><span style="color:#080">&#39;created_at&#39;</span><span style="color:#660">).</span><span style="color:#000">strftime</span><span style="color:#660">(</span><span style="color:#080">&#39;%Y-%m-%d&#39;</span><span style="color:#660">))</span><span style="color:#000"><br></span><span style="color:#660">[(</span><span style="color:#000">day</span><span style="color:#660">,</span><span style="color:#000"> len</span><span style="color:#660">(</span><span style="color:#000">list</span><span style="color:#660">(</span><span style="color:#000">this_day</span><span style="color:#660">)))</span><span style="color:#000"> </span><span style="color:#008">for</span><span style="color:#000"> day</span><span style="color:#660">,</span><span style="color:#000"> this_day </span><span style="color:#008">in</span><span style="color:#000"> grouped</span><span style="color:#660">]</span><span style="color:#000"><br></span><span style="color:#800"># <a href="http://chase-seibert.github.io/blog/2012/02/24/django-aggregation-group-by-day.html" target="_blank">http://chase-seibert.github.io/blog/2012/02/24/django-aggregation-group-by-day.html</a></span><span style="color:#000"><br><br><br></span><span style="color:#660">[(</span><span style="color:#080">&#39;2016-01-24&#39;</span><span style="color:#660">,</span><span style="color:#000"> </span><span style="color:#066">7</span><span style="color:#660">),</span><span style="color:#000"><br> </span><span style="color:#660">(</span><span style="color:#080">&#39;2016-01-22&#39;</span><span style="color:#660">,</span><span style="color:#000"> </span><span style="color:#066">13</span><span style="color:#660">),</span><span style="color:#000"><br> </span><span style="color:#660">(</span><span style="color:#080">&#39;2016-01-21&#39;</span><span style="color:#660">,</span><span style="color:#000"> </span><span style="color:#066">5</span><span style="color:#660">),</span><span style="color:#000"><br> </span><span style="color:#660">(</span><span style="color:#080">&#39;2016-01-15&#39;</span><span style="color:#660">,</span><span style="color:#000"> </span><span style="color:#066">9</span><span style="color:#660">),</span><span style="color:#000"><br> </span><span style="color:#660">(</span><span style="color:#080">&#39;2016-01-14&#39;</span><span style="color:#660">,</span><span style="color:#000"> </span><span style="color:#066">1</span><span style="color:#660">),</span><span style="color:#000"><br> </span><span style="color:#660">(</span><span style="color:#080">&#39;2016-01-09&#39;</span><span style="color:#660">,</span><span style="color:#000"> </span><span style="color:#066">20</span><span style="color:#660">)]</span><span style="color:#000"><br></span><span style="color:#000"><br></span></div></code></div><span><div><br><br></div><div><br><table border="0" cellpadding="0" width="180" style="font-size:small;font-family:&#39;Times New Roman&#39;;table-layout:fixed"><tbody><tr><td align="left" valign="middle" width="80" style="font-family:arial,sans-serif"><p style="margin-right:10px;font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;margin-bottom:10px"><a href="http://eventex-regis.herokuapp.com/" style="color:rgb(17,85,204)" target="_blank">EVENTEX </a><a href="https://github.com/rg3915/wttd2" style="color:rgb(17,85,204);display:inline" target="_blank"><img width="16" height="16" alt="github" style="margin-bottom:2px;border-style:none;border-width:initial;display:inline"></a><span style="white-space:nowrap"><img width="2"></span></p></td><td align="left" nowrap width="100" style="font-family:arial,sans-serif"><p style="font-family:Helvetica,Arial,sans-serif;font-size:10px;line-height:12px;color:rgb(33,33,33);margin-bottom:10px"><span style="font-weight:bold">Regis da Silva</span><br>Web Developer<br><a href="http://grandeportal.github.io/" style="color:rgb(17,85,204)" target="_blank">grandeportal.github.io</a> <br></p><p style="font-size:0px;line-height:0;font-family:Helvetica,Arial,sans-serif"><a href="https://about.me/rg3915" style="color:rgb(17,85,204);display:inline" target="_blank"><img width="16" height="16" alt="Aboutme" style="margin-bottom:2px;border-style:none;border-width:initial;display:inline"></a><span style="white-space:nowrap"><img width="2"></span> <a href="https://www.linkedin.com/profile/public-profile-settings?trk=prof-edit-edit-public_profile" style="color:rgb(17,85,204);display:inline" target="_blank"><img width="16" height="16" alt="Linkedin" style="margin-bottom:2px;border-style:none;border-width:initial;display:inline"></a><span style="white-space:nowrap"><img width="2"></span> <a href="https://github.com/rg3915" style="color:rgb(17,85,204);display:inline" target="_blank"><img width="16" height="16" alt="github" style="margin-bottom:2px;border-style:none;border-width:initial;display:inline"></a><span style="white-space:nowrap"><img width="2"></span> <a href="http://grandeportal.github.io/" style="color:rgb(17,85,204);display:inline" target="_blank"><img width="16" height="16" alt="matrix" style="margin-bottom:2px;border-style:none;border-width:initial;display:inline"></a></p></td></tr></tbody></table></div></span></div><span>

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com" target="_blank">wttd-2015+unsubscribe@googlegroups.com</a>.<br>
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com" target="_blank">wttd-2015@googlegroups.com</a>.<br>
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015" target="_blank">https://groups.google.com/group/wttd-2015</a>.<br></span>
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/5b0cdd7e-1a3a-486b-9363-4466b04b7570%40googlegroups.com?utm_medium=email&amp;utm_source=footer" target="_blank">https://groups.google.com/d/msgid/wttd-2015/5b0cdd7e-1a3a-486b-9363-4466b04b7570%40googlegroups.com</a>.<div><div><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/optout</a>.<br>
</div></div></blockquote></div><br></div>

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com" target="_blank">wttd-2015+unsubscribe@googlegroups.com</a>.<br>
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com" target="_blank">wttd-2015@googlegroups.com</a>.<br>
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015" target="_blank">https://groups.google.com/group/wttd-2015</a>.<br></div></div>
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CABFnmayTFynk9w5YjLH%3DWCGxBMJhKfB%3Db937FFYX0ys5f%3Drf4A%40mail.gmail.com?utm_medium=email&amp;utm_source=footer" target="_blank">https://groups.google.com/d/msgid/wttd-2015/CABFnmayTFynk9w5YjLH%3DWCGxBMJhKfB%3Db937FFYX0ys5f%3Drf4A%40mail.gmail.com</a>.<div><div><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/optout</a>.<br>
</div></div></blockquote></div><br></div></div></div>
</blockquote></div><br></div></div></div><div><div class="h5">

<p></p>

-- <br>
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br>
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com" target="_blank">wttd-2015+unsubscribe@googlegroups.com</a>.<br>
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com" target="_blank">wttd-2015@googlegroups.com</a>.<br>
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015" target="_blank">https://groups.google.com/group/wttd-2015</a>.<br></div></div>
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZO2MbsPzu1yOE%2BkCT-EnX44vvQu_1HfR-W80y2x_2b8uQ%40mail.gmail.com?utm_medium=email&amp;utm_source=footer" target="_blank">https://groups.google.com/d/msgid/wttd-2015/CA%2BDznZO2MbsPzu1yOE%2BkCT-EnX44vvQu_1HfR-W80y2x_2b8uQ%40mail.gmail.com</a>.<div class="HOEnZb"><div class="h5"><br>
Para mais opções, acesse <a href="https://groups.google.com/d/optout" target="_blank">https://groups.google.com/d/optout</a>.<br>
</div></div></blockquote></div><br></div>

<p></p>

-- <br />
Você recebeu essa mensagem porque está inscrito no grupo &quot;Welcome to the Django 2015&quot; dos Grupos do Google.<br />
Para cancelar inscrição nesse grupo e parar de receber e-mails dele, envie um e-mail para <a href="mailto:wttd-2015+unsubscribe@googlegroups.com">wttd-2015+unsubscribe@googlegroups.com</a>.<br />
Para postar nesse grupo, envie um e-mail para <a href="mailto:wttd-2015@googlegroups.com">wttd-2015@googlegroups.com</a>.<br />
Acesse esse grupo em <a href="https://groups.google.com/group/wttd-2015">https://groups.google.com/group/wttd-2015</a>.<br />
Para ver essa discussão na Web, acesse <a href="https://groups.google.com/d/msgid/wttd-2015/CAGKiVgBU8D8nf4G6ew%3DLHeGaLzeOXfBk2TM_J0nrbgjBWc37LA%40mail.gmail.com?utm_medium=email&utm_source=footer">https://groups.google.com/d/msgid/wttd-2015/CAGKiVgBU8D8nf4G6ew%3DLHeGaLzeOXfBk2TM_J0nrbgjBWc37LA%40mail.gmail.com</a>.<br />
Para mais opções, acesse <a href="https://groups.google.com/d/optout">https://groups.google.com/d/optout</a>.<br />
